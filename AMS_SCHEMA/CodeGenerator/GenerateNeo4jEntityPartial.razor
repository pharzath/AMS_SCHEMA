@using AMS.Model.Models
@using AMS_SCHEMA.Class

@using Olive
@using System.Web
@using AMS.Model
using System.ComponentModel.DataAnnotations.Schema;
using Newtonsoft.Json;
using QOQNOS.CORE.data;
@foreach (var ns in _nameSpaces){
<text>
using @ns;
</text>}

namespace @Module.Name;

// #@Label.DisplayName#
public partial class @Label.Name : @GetParentClass()
{
    #region Neo4J 

    #endregion

}



@code {
    
    [Parameter]
    public AmsNeo4JMicroserviceModule Module { get; set; }

    [Parameter]
    public AmsNeo4JNodeLabel Label { get; set; }
    
    [Parameter]
    public List<AmsNeo4JNodeRelation> Relations { get; set; }
    
    [Parameter]
    public List<AmsNeo4JNodeRelation> IncommingRelations { get; set; }

    List<string> _nameSpaces = new List<string>();
    protected override void OnInitialized()
    {
        var parentNs = Label.ParentLabel?.Microservice?.Modules.First(x => x.ModuleType == Module.ModuleType);
        if (parentNs != null)
            _nameSpaces.Add(parentNs.Name);

        base.OnInitialized();
    }

    string GetParentClass()
    {
        if (Label.ParentLabel is { })
        {
            return Label.ParentLabel.Name;
        }

        //return $"AbstractEntity<{Label.Name}, Guid>";
        return $" EntityBase";
    }

}
