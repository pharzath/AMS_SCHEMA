@using AMS.Model.Models
@using AMS.Model.Services
@using AMS_SCHEMA.Class
@using Olive

using AMS.Repository;
using Microsoft.Extensions.DependencyInjection;

namespace AMS.ServiceRegistration;
public static class RegisterRepositories
{
    public static IServiceCollection RegisterEntityRepositories(this IServiceCollection services)
    {
@foreach (var node in Nodes)
{
@foreach (var label in DataService.GetLabels(node))
{
<text>
        services.AddScoped&lt;@(label.Name)Repository>();
</text>
}
}
        return services;
    }
}

@code
{
    [Inject] DataService DataService { get; set; }

    [Parameter]
    public List<AmsNeo4JNode> Nodes { get; set; }

}
