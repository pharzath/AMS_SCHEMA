@using AMS.Model
<MudDialog>
	<DialogContent>
		<MudCard>
			<MudCardContent>
				<MudGrid>
					<MudItem md="12">
						<MudTextField Label="Path" ReadOnly="true"
									  @bind-Value="FileSystemItem.FullPath"
									  Adornment="Adornment.Start"
									  AdornmentIcon="@Icons.Material.Filled.Pattern"
									  Clearable="true"
									  FullWidth="true" />
					</MudItem>
					<MudItem md="6">
						<MudCheckBox Label="Ignore this File/Folder" @bind-Value="Config.Ignored"></MudCheckBox>
					</MudItem>
					<MudItem md="6">
						<MudTextField Label="Name Policy" @bind-Value="Config.NamePolicy" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Policy" Clearable="true" FullWidth="true" />
					</MudItem>
				</MudGrid>
				<MudText Typo="Typo.body1">Hello</MudText>
			</MudCardContent>
		</MudCard>
	</DialogContent>
	<DialogActions>
		<MudButton Variant="Variant.Filled" Color="Color.Success" StartIcon="@Icons.Material.Filled.Save" OnClick="Save">
			Save
		</MudButton>

		<MudButton Variant="Variant.Text" Color="Color.Warning" StartIcon="@Icons.Material.Filled.Close" OnClick="() => CloseDialog()">
			Close
		</MudButton>
	</DialogActions>
</MudDialog>

@code {

	[Parameter]
	public AmsNeo4JMicroserviceModule Module { get; set; }

	[Parameter]
	public FileSystemItem FileSystemItem { get; set; }

	[CascadingParameter] MudDialogInstance DialogInstance { get; set; }
	private void CloseDialog()
	{
		DialogInstance.Cancel();
	}

	AmsNeo4JMicroserviceModuleItemTemplateConfig Config;

	protected override void OnInitialized()
	{
		Config = FileSystemItem.Config ?? new AmsNeo4JMicroserviceModuleItemTemplateConfig()
		{
			FileSystemItem = FileSystemItem,
			Module = Module
		};
	}

	private void Save()
	{
		DialogInstance.Close(DialogResult.Ok(Config));
	}

}
